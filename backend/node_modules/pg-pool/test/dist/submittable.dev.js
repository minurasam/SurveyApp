'use strict';

var Cursor = require('pg-cursor');

var expect = require('expect.js');

var describe = require('mocha').describe;

var it = require('mocha').it;

var Pool = require('../');

describe('submittle', function () {
  it('is returned from the query method', false, function (done) {
    var pool = new Pool();
    var cursor = pool.query(new Cursor('SELECT * from generate_series(0, 1000)'));
    cursor.read(function (err, rows) {
      expect(err).to.be(undefined);
      expect(!!rows).to.be.ok();
      cursor.close(done);
    });
  });
});