'use strict';

var isDefiningProjection = require('./isDefiningProjection');
/*!
 * Determines if `path` is excluded by `projection`
 *
 * @param {Object} projection
 * @param {string} path
 * @return {Boolean}
 */


module.exports = function isPathExcluded(projection, path) {
  if (path === '_id') {
    return projection._id === 0;
  }

  var paths = Object.keys(projection);
  var type = null;

  for (var _i = 0, _paths = paths; _i < _paths.length; _i++) {
    var _path = _paths[_i];

    if (isDefiningProjection(projection[_path])) {
      type = projection[path] === 1 ? 'inclusive' : 'exclusive';
      break;
    }
  }

  if (type === 'inclusive') {
    return projection[path] !== 1;
  }

  if (type === 'exclusive') {
    return projection[path] === 0;
  }

  return false;
};